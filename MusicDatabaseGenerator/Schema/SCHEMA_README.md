## **Main**
This table stores metadata that relates directly to 1 track
- `TrackID`
  - Use this ID to map songs in other tables. These values are unique across all tables that reference this ID.
- `Title`
- `Duration`
  - The duration of the song in milliseconds. Stored in milliseconds to avoid tollerance stacking when calculating the duration of playlists.
- `FilePath`
  - The file path of the song, based on where you tell the source code to look for your files
- `Volume`
  - This manual field is a way to set a sort of volume offset that applies just to 1 track, for ease of volume balancing across tracks
- `OwnerID`
  - The username of the laptop on which this database was generated
- `ReleaseYear`
  - The year that the song was released
- `Lyrics`
  - The lyrics of the song (if included directly on the file). No external services are used to generate this data
- `Comment`
  - The comment field on the file. Often, information about where the track was purchased can be found here
- `BeatsPerMinute`
  - The beats per minute of the song, accord to the file itself
- `Copyright`
  - The copyright of the track, if exists and provided by the publisher
- `Publisher`
  - The name of the publisher as a string. No other publisher specific metadata is generated by this tool
- `ISRC`
  - International Standard Recording Code of this track (if provided)
- `Bitrate`
  - The bitrate of the track
- `Channels`
  - The number of channels the track has
- `SampleRate`
  - The sample rate of the track
- `BitsPerSample`
  - The bits per sample of the track
- `LinkedTrackPlaylistID`
  - Certain songs were composed to be played specifically one after the other. When present, refers to a playlist that contains 2+ songs in a specific order that are meant to be played back-to-back, even while shuffling.
- `Rating`
  - Rating metadata exists not on the file, but in Windows Media Player. For this reason, this field is manual, not generated
- `AddDate`
  - The date when this file was first added to the folder this tool is pointing to. The creation date of the file itself
- `LastModifiedDate`
  - The last time the file itself was touched. Not to be confused with the last time this tool generated data for the file (see `GeneratedDate`)
- `GeneratedDate`
  - The date this tool examined the track and generated data for it. Not to be confused with `LastModifiedDate`

## **Artist**
This table has metadata related to individuals that create music.
- `ArtistID`
  - The ID of this table
- `PrimaryPersonID`
  - The person listed first in the file's metadata about artists' real names (see the `ArtistPersons` table)
- `ArtistName`
  - The artist's or band's stage name

## **ArtistTracks**
This table maps between the **Main** table and the **Artist** table via the `TrackID` and `ArtistID` columns.
- `ArtistID`
  - Foreign key to the `Artist` table
- `TrackID`
  - Foreign key to the `Main` table

## **ArtistPersons**
This table adds a 1-to-many relationship to the **Artist** table to map the real name of the artist (members) to the artist "stage name"
- `PersonID`
  - The ID of this table
- `ArtistID`
  - Foreign key to the `Artist` table
- `PeresonName`
  - The real name of the artist. Multiple people can be associated with the same artist

## **TrackPersons**
This table adds a 1-many relationship from track to the **ArtistPersons** table. Since person data is only stored in that table, it serves as a "Persons" table to which this table matches with. Note that the data in the **ArtistPersons** table is derived from the raw person data on each music file, which is represented by this table.
- `TrackID`
  - Foreign key to the `Main` table
- `PersonID`
  - Foreign key to the `ArtistPersons` table

## **Album**
This table has metadata related to any collection of music. This includes Albums, EPs, LPs, etc.
- `AlbumID`
  - The ID of this table
- `AlbumName`
  - The name of the album
- `TrackCount`
  - The calculated number of tracks on this album. Note that if 2 artists have the same name for 2 different albums, tracks from both artists will be combined into 1 album. This also applied when the album name cannot be found on the file's metadata (all tracks will be grouped into an album with a `NULL` album name).
- `ReleaseDate`
  - This date is calculated as the latest release date of all tracks on the album

## **AlbumTracks**
This table maps between the **Main** table and the **Album** table and has additional metadata related to the track and album.
- `AlbumID`
  - Foreign key to the `Album` table
- `TrackID`
  - Foreign key to the `Main` table
- `TrackOrder`
  - The position this track holds within the associated album

## **Genre**
This table has metadata related to genres.
- `GenreID`
  - The ID of this table
- `GenreName`
  - The name of the genre associated with this track

## **GenreTracks**
This table maps between the **Main** table and the **Genre** table via the `TrackID` and `GenreID` columns.
- `GenreID`
  - Foreign key to the `Genre` table
- `TrackID`
  - Foreign key to the `Main` table

## **Mood**
This table is opinionated and is therefore not generated by this tool. It's intent is to allow the user fine grain control over descriptors of music to allow for better on-the-fly creation of playlists. These are like genres, but specific to your database and your taste, rather than the more generalized genres of each track.
- `MoodID`
  - The ID of this table
- `MoodDesc`
  - The descriptor of this mood, used to describe all tracks that will be associated with it.

## **MoodTracks**
This table maps from moods to tracks so users can assocaite many moods to many tracks.
- `MoodID`
  - Foreign key to the `Mood` table
- `TrackID`
  - Foreign key to the `Main` table

## **Playlist**
Houses the data associated with traditional music playlists. This metadata is not included in the individual music files and is therefore not generated.
- `PlaylistID`
  - The ID of this table
- `PlaylistName`
  - The name of the playlist, entered by the user
- `PlaylistDescription`
  - The description of the playlist, entered by the user
- `CreationDate`
  - The date the playlist was created
- `LastEditDate`
  - The last date the playlist name, description, or associated tracks were edited by the user

## **PlaylistTracks**
Maps between the playlist data and the tracks in the playlist. Entered manually by the user.
- `PlaylistID`
  - Foreign key to the `Playlist` table
- `TrackID`
  - Foreign key to the `Main` table
- `TrackOrder`
  - The order in which the tracks in the playlist defined by `PlaylistID` are organized
  - Track order is not guaranteed to be sequential within 1 playlist (i.e. could be 1, 2, 6, 8, etc.)

## **PlayLogs**
Records which songs were played and when. This table will likely need to be purged periodically if used by a custom music app. This data is not generated because it is intended for use by a custom music app. One feature of using a table like this is a "persistent shuffle" that avoid playing the same songs that one might have heard from a different playlist. This would also allow for statistics on most played and least played songs in one's library.
- `TrackID`
  - Foreign key to the `Main` table
- `DatePlayed`
  - The day the track was played

## **Example Queries**

View: `MainDataJoined`:
> Intended to give users an overview of what was generated after using this tool
> ```SQL
> SELECT M.*, ATR.TrackOrder, A.AlbumName, A.ReleaseYear, G.GenreName, ART.ArtistName FROM MusicLibrary.dbo.Main M
> LEFT JOIN MusicLibrary.dbo.AlbumTracks ATR ON M.TrackID = ATR.TrackID
> LEFT JOIN MusicLibrary.dbo.Album A ON A.AlbumID = ATR.AlbumID
> LEFT JOIN MusicLibrary.dbo.GenreTracks GTR ON GTR.TrackID = M.TrackID
> LEFT JOIN MusicLibrary.dbo.Genre G ON G.GenreID = GTR.GenreID
> LEFT JOIN MusicLibrary.dbo.ArtistTracks ARTT ON ARTT.TrackID = M.TrackID
> LEFT JOIN MusicLibrary.dbo.Artist ART ON ART.ArtistID = ARTT.ArtistID
> ```

View: `LeadArtists`:
> Intended to showcase how artists are associated with real people that are part of those music groups
> ```SQL
> SELECT ART.*, AP.*, PRP.PersonName AS PrimaryPerson FROM MusicLibrary.dbo.Artist ART
> LEFT JOIN MusicLibrary.dbo.ArtistPersons AP ON ART.ArtistID = AP.ArtistID
> LEFT JOIN MusicLibrary.dbo.ArtistPersons PRP ON PRP.PersonID = ART.PrimaryPersonID
> ```

View: _None_:
> Intended to showcase album art data
> ```SQL
> SELECT * FROM MusicLibrary.dbo.AlbumArt ART
> LEFT JOIN MusicLibrary.dbo.Album ALB ON ALB.AlbumID = ART.AlbumID
> ```

## **Where are the Foreign Key Constraints?**

Because this database is generated, it's safe to assume that as long as the tool is correct, the foreign key constraints hold implicitly. Additionally, during updates or deletes, the database will take on an intermediate state that violates the constraints. Put simply, it's a pain.